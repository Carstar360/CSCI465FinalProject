//Carson Lee
//Coding ideas derived from Web Dev Simplified youtube video
//https://www.youtube.com/watch?v=riDzcEQbX6k&t=994s
let questionOrder, index
var startButton = document.getElementById('start-btn')
//Start the game by pressing start button
startButton.addEventListener('click', startGame)
var nextButton = document.getElementById('next-btn')
//Go to next Question, increment Question #
nextButton.addEventListener('click', () => {
        index++
        nextQ()
})
var questionContainerElement = document.getElementById('question-container')
//Start the game
//Hide the start button after pressing start, then display the first question
function startGame() {
        startButton.classList.add('hide')
        questionOrder = questions.sort()
        index = 0
        questionContainerElement.classList.remove('hide')
        nextQ()
}
//Call reset which hides the current page and displays the next question
function nextQ() {
        //clear(document.body)
        document.body.classList.remove('correct')
        document.body.classList.remove('wrong')
        nextButton.classList.add('hide')
        while (answerButtonsElement.firstChild) {
                answerButtonsElement.removeChild(answerButtonsElement.firstChild)
        }
        showQuestion(questionOrder[index])
}

var questionElement = document.getElementById('question')
var answerButtonsElement = document.getElementById('answer-buttons')
//
function showQuestion(question) {
        questionElement.innerText = question.question
        question.answers.forEach(answer => {
                var button = document.createElement('button')
                button.innerText = answer.text
                button.classList.add('btn')
                if (answer.correct) {
                        button.dataset.correct = answer.correct
                }
                button.addEventListener('click', selectAnswer)
                answerButtonsElement.appendChild(button)
        })
}
function selectAnswer(x) {
        var selectedButton = x.target
        var correct = selectedButton.dataset.correct
        statusSet(document.body, correct)
        if (8 > index + 1) {
                nextButton.classList.remove('hide')
        } 
        else {
                startButton.innerText = 'Would you like to Play Again?'
                startButton.classList.remove('hide')
                index = 0
        }
}
    
    
function statusSet(element, correct) {
        element.classList.remove('correct')
        element.classList.remove('wrong')
        if (correct) {
                element.classList.add('correct')
        } 
        else {
                element.classList.add('wrong')
        }
}
var questions = [
        {
                question: 'Opponent: Steve Rogers',
                answers: [
                        { text: 'Split', correct: true },
                        { text: 'Steal', correct: false }
                ]
        },
        {
                question: 'Opponent: Tony Stark',
                answers: [
                        { text: 'Split', correct: true },
                        { text: 'Steal', correct: false },
                ]
        },
        {
                question: 'Opponent: Thanos',
                answers: [
                        { text: 'Split', correct: true },
                        { text: 'Steal', correct: false },
                ]
        },
        {
                question: 'Opponent: Deadpool',
                answers: [
                        { text: 'Split', correct: false },
                        { text: 'Steal', correct: true },
                ]
        },
        {
                question: 'Opponent: Spiderman',
                answers: [
                        { text: 'Split', correct: true },
                        { text: 'Steal', correct: false },
                ]
        },
        {
                question: 'Opponent: Shang-Chi',
                answers: [
                        { text: 'Split', correct: true },
                        { text: 'Steal', correct: false },
                ]
        },
        {
                question: 'Opponent: Rocket',
                answers: [
                        { text: 'Split', correct: false },
                        { text: 'Steal', correct: true },
                ]
        },
        {
                question: 'Opponent: Loki',
                answers: [
                        { text: 'Split', correct: false },
                        { text: 'Steal', correct: true },
                ]
        }
]
